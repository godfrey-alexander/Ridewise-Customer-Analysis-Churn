services:
  - type: web
    name: ridewise-churn-api
    env: docker
    plan: free
    autoDeploy: true
    # Uses Dockerfile default CMD (FastAPI)
    envVars:
      - key: PORT
        value: "8000"

  - type: web
    name: ridewise-churn-frontend
    env: docker
    plan: free
    autoDeploy: true
    envVars:
      - key: PORT
        value: "8501"
      - key: API_URL
        # IMPORTANT: after first deploy, set this to the public URL of ridewise-churn-api
        value: "https://ridewise-churn-api.onrender.com"
    dockerCommand: "streamlit run frontend/app.py --server.port $PORT --server.address 0.0.0.0 --server.headless true"