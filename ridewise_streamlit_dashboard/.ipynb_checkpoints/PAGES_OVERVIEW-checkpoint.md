# RideWise Streamlit Dashboard — Page Overview

This document describes the **function and features** of each page available from the home page (sidebar navigation).

---

## Home Page

**File:** `Home.py`

**Function:** Entry point of the app. It introduces the dashboard and loads the main trip dataset. Users are directed to use the **sidebar** to move between pages.

**Features:**
- **Page title:** Customer Churn Dashboard (config)
- **Intro text:** Short description of the app (currently framed as customer churn + ML; the rest of the app is rideshare/operational).
- **Navigation hint:** “Use the sidebar to navigate between pages.”
- **Data load:** Calls `load_data()` to load `data/riders_trips.csv` (used across other pages).

**Note:** The sidebar is auto-generated by Streamlit from the `pages/` folder. The pages listed below are what users actually see and use.

---

## 1. Overview

**File:** `pages/1_Overview.py`  
**Title in app:** Rideshare Executive Summary

**Function:** High-level snapshot of rideshare activity: who rides, where, and how much revenue is generated. Aimed at executives and quick status checks.

**Features:**
- **Global filters (sidebar):**
  - **City** — multiselect (default: all cities).
  - **Loyalty Tier** — multiselect (default: all tiers).
- **Key metrics (KPI cards):**
  - Total Users (currently hardcoded to 10,000).
  - Total Trips (unique `trip_id` count).
  - Revenue (sum of `total_fare_with_tip`).
- **Customer segmentation:** Pie chart of users by **loyalty status** (share of users per tier).
- **City distribution:** Horizontal bar chart of user counts by **city**.
- **Styling:** Uses shared sidebar styling and custom `metric_card` widgets; grey/neutral color palette.

---

## 2. Demand Analysis

**File:** `pages/2_Demand_Analysis.py`  
**Title in app:** Rideshare Interactive Dashboard — demand focus

**Function:** Analyze **trip demand over time** (by hour and by day) so operations can see peaks, patterns, and trends. All metrics and charts respond to filters.

**Features:**
- **Sidebar filters:**
  - **Year** — multiselect (default: first year in data).
  - **Month** — multiselect (default: 5th month).
  - **Cities** — multiselect (default: all cities).
- **Key metrics (filtered):**
  - Total Users, Total Trips, Revenue (formatted as currency), Average Fare.
- **Demand analysis:**
  - **Hourly trips:** Bar chart of trip count by hour of day (24h) — “when do people ride?”
  - **Daily demand:** Line chart of total trips per calendar day over the selected month — “how does demand change day by day?”
- **Data source:** Same `riders_trips` data as Overview, with `pickup_time` used for hour/date grouping.

---

## 3. Revenue Analysis

**File:** `pages/3_Revenue_Analysis.py`  
**Title in app:** Rideshare Interactive Dashboard — revenue focus

**Function:** Focus on **revenue over time** (by hour and by day) to monitor financial performance and revenue patterns. Complements Demand Analysis by showing “how much” instead of “how many trips.”

**Features:**
- **Sidebar filters:** Same as Demand Analysis — **Year**, **Month**, **Cities** (same defaults and behavior).
- **Key metrics (filtered):**
  - Total Users, Total Trips, Revenue, Average Fare (same four KPIs as Demand Analysis).
- **Revenue analysis:**
  - **Revenue by hour:** Bar chart of total `total_fare` by hour of day.
  - **Daily revenue:** Line chart of total revenue per calendar day over the selected month.
- **Data source:** Same filtered `riders_trips` data; aggregates use `total_fare` (and tips are in the overall revenue KPI).

---

## 4. Exposure Analysis

**File:** `pages/4_Exposure_Analysis.py`  
**Title in app:** Rideshare Interactive Dashboard — exposure/churn risk

**Function:** Quantify **revenue at risk** if customers who have been inactive for a chosen number of days are not re-engaged. Uses RFM-style segments to show which customer groups drive most of that exposure.

**Features:**
- **Sidebar:**
  - **Inactivity threshold:** Slider from 7 to 90 days (step 7). “Days since last activity” — customers with `recency ≤` this value are “at risk.”
- **Data source:** `data/rfm_data.csv` (RFM segments; `rfm_score` column is dropped). Defines “at risk” by **recency** and aggregates **monetary** (revenue) by **segments**.
- **Key metrics:**
  - **Revenue at Risk** — sum of `monetary` for at-risk customers (formatted as £).
  - **Customers Exposed** — count of unique `user_id` at risk.
  - **Date range card** — min and max `last_trip_time` among at-risk customers (via `date_card` widget).
- **Visualizations:**
  - **Treemap:** “Proportion of Revenue Lost by Customer Segments” — segments sized by revenue exposure, with proportion and amount in hover/labels; grey color scale.
  - **Data table:** “Customers Driving Exposure” — dataframe of at-risk customers (excluding `last_trip_time`) for drill-down.
- **Copy:** Explains that the view shows “maximum potential revenue lost if customers inactive for the selected number of days are not re-engaged.”

---

## 5. Map Hotspots

**File:** `pages/Map_Hotspots.py`  
**Title in app:** Pickup & Dropoff Hotspots Map

**Function:** Show **spatial concentration** of pickups and dropoffs using hexagon density maps. Helps identify busy areas for operations, placement, or marketing.

**Features:**
- **Data source:** Separate CSV — hardcoded path to `data_EDA.csv` (e.g. `.../data/new_data/data_EDA.csv`). Not the same as `riders_trips.csv`; must contain `pickup_lat`, `pickup_lng`, `dropoff_lat`, `dropoff_lng`.
- **Performance:** Data is sampled to 20,000 rows for faster rendering.
- **Pickup hotspots:** Single pydeck map with a **HexagonLayer** on `[pickup_lng, pickup_lat]` (radius 200).
- **Dropoff hotspots:** Second pydeck map with a **HexagonLayer** on `[dropoff_lng, dropoff_lat]` (radius 200).
- **View:** Initial view state is centered on the mean pickup lat/lng with zoom 10. No filters; what you see is the sampled dataset.

---

## Summary Table

| Page            | Main purpose                     | Key filters              | Main charts / views                          |
|-----------------|----------------------------------|--------------------------|----------------------------------------------|
| **Home**        | Intro + data load                | —                        | —                                            |
| **Overview**    | Executive summary                | City, Loyalty            | KPIs, segmentation pie, city bar             |
| **Demand Analysis** | Trip demand over time        | Year, Month, Cities      | KPIs, hourly trips bar, daily trips line     |
| **Revenue Analysis** | Revenue over time            | Year, Month, Cities      | KPIs, revenue by hour bar, daily revenue line|
| **Exposure Analysis** | Revenue at risk / churn exposure | Inactivity (days)    | KPIs, date range, segment treemap, table     |
| **Map Hotspots**| Pickup/dropoff density           | —                        | Pickup hex map, dropoff hex map              |

---

## Shared Components

- **`data_loader.py`:** `load_data()` for `riders_trips.csv` (Overview, Demand, Revenue, Exposure logic); `load_data_segments()` for `rfm_data.csv` (Exposure Analysis).
- **`style.py`:** `inject_sidebar_style()` — sidebar link size/padding, caption color, dataframe container styling.
- **`widgets/metric_card.py`:** Reusable KPI card (title, value, optional delta).
- **`widgets/date_card.py`:** Date range card used on Exposure Analysis.

This completes the overview of the function and features of each page on the home (sidebar) of the RideWise Streamlit dashboard.
